<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.tenco.movie.repository.interfaces.MessageRepository">
   <insert id="save">
        INSERT INTO Message (sender_id, recipient_id, message, timestamp)
        VALUES (#{senderId}, #{recipientId}, #{message}, #{timestamp})
    </insert>
    
    <select id="findConversation" resultType="com.tenco.movie.dto.MessageDTO">
    SELECT * FROM Message WHERE (sender_id = 
 	#{senderId} AND recipient_id = #{recipientId}) 
 	OR (sender_id = #{recipientId} 
 	AND recipient_id = #{senderId}) 
 	ORDER BY timestamp
    </select>
</mapper>