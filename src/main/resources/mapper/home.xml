<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<<<<<<< HEAD
<<<<<<< HEAD
<<<<<<< HEAD
<<<<<<< HEAD
<mapper
	namespace="com.tenco.movie.repository.interfaces.HomeRepository">

	<insert id="insertMovie">
		insert into movies_tb (title, movie_desc,movie_img
		,release_date)
		values(#{title},#{movieDesc},#{movieImg},#{releaseDate})
	</insert>

	<select id="findByTitle"
		resultType="com.tenco.movie.repository.model.Movies">
		select * from movies_tb where title = #{title};
	</select>

	<select id="findById"
		resultType="com.tenco.movie.repository.model.MovieDetailTB">
		select * from movie_detail_tb where movie_id = #{id}
	</select>

	<select id="findIdByGenreName"
		resultType="com.tenco.movie.repository.model.Genres">
		select * from genres_tb where genre_name = #{genre}
	</select>

	<select id="checkMovieGenreExists"
		resultType="com.tenco.movie.repository.model.MovieGenre">
		select * from movie_genre_tb where movie_id = #{movieId}
		and genre_id = #{genreId}
	</select>

	<insert id="insertMovieGenre">
		INSERT INTO movie_genre_tb (movie_id, genre_id)
		VALUES (#{movieId}, #{genreId});
	</insert>

	<insert id="insertMovieDetail">
		INSERT INTO movie_detail_tb (movie_id, title,
		title_en, show_tm, open_dt, prd_stat_nm, watch_grade_nm)
		VALUES
		(#{movieId}, #{title}, #{titleEn}, #{showTm}, #{openDt},
		#{prdStatNm},#{watchGradeNm})
	</insert>

	<insert id="insertGenre">
		insert into genres_tb (genre_name) values(#{genre})
	</insert>
	<insert id="insertDirector">
		insert into directors_tb (name, director_face_file)
		values(#{name}, #{directorFaceFile})
	</insert>

	<insert id="insertActors">
		insert into actors_tb (name, actor_face_file)
		values
		(#{name}, #{actorFaceFile});
	</insert>

	<select id="findByActorName"
		resultType="com.tenco.movie.repository.model.Actors">
		select * from actors_tb where name = #{name}
	</select>

	<insert id="insertMovieActor">
		insert into movie_actor_tb (movie_id, actors_id)
		values(#{movieId},#{actorId})
	</insert>

	<select id="findByMovieAndGenre"
		resultType="com.tenco.movie.repository.model.MovieActor">
		select * from movie_actor_tb where movie_id = #{movieId}
		AND actors_id = #{actorId}
	</select>

	<select id="findByDirectorName"
		resultType="com.tenco.movie.repository.model.Director">
		select * from directors_tb where name = #{name}
	</select>

	<select id="findByMovieIdAndDirectorId"
		resultType="com.tenco.movie.repository.model.MovieDirector">
		select * from movie_director_tb where movie_id =
		#{movieId}
		AND director_id = #{directorId}
	</select>

	<insert id="insertByMovieDirector">
		insert into movie_director_tb (movie_id, director_id)
		values(#{movieId}, #{directorId})
	</insert>

=======
=======
>>>>>>> 8b40cc4 (영화 API DB로 자동 연결구현)
=======
>>>>>>> a3aafde (3차 자동 인설트 완성)


<mapper namespace="com.tenco.movie.repository.interfaces.HomeRepository">

	<select id="searchTitle" resultType="com.tenco.movie.repository.model.search">
		select * from movies_tb where title like '${title}'
	</select>
	
	<select id="titleCount">
		select count(title) from movies_tb where ${title} like ${title};
	</select>

<<<<<<< HEAD
>>>>>>> 32a4fcf (영화 검색 기능 중)
=======
=======
<mapper namespace="com.tenco.movie.repository.interfaces.HomeRepository">
	
=======
=======


>>>>>>> b04a172 (충돌해결중)
<mapper
	namespace="com.tenco.movie.repository.interfaces.HomeRepository">

	<select id="searchTitle"
		resultType="com.tenco.movie.repository.model.search">
		select * from movies_tb where title like '${title}'
	</select>

	<select id="titleCount">
		select count(title) from movies_tb where ${title}
		like ${title};
	</select>


	<insert id="insertMovie">
		insert into movies_tb (title, movie_desc,movie_img
		,release_date)
		values(#{title},#{movieDesc},#{movieImg},#{releaseDate})
	</insert>

	<select id="findByTitle"
		resultType="com.tenco.movie.repository.model.Movies">
		select * from movies_tb where title = #{title};
	</select>
<<<<<<< HEAD
<<<<<<< HEAD
>>>>>>> e6ede81 (영화 API DB로 자동 연결구현)
<<<<<<< HEAD
>>>>>>> 8b40cc4 (영화 API DB로 자동 연결구현)
=======
=======
=======
>>>>>>> b04a172 (충돌해결중)

	<select id="findById"
		resultType="com.tenco.movie.repository.model.MovieDetailTB">
		select * from movie_detail_tb where movie_id = #{id}
	</select>

	<select id="findIdByGenreName"
		resultType="com.tenco.movie.repository.model.Genres">
		select * from genres_tb where genre_name = #{genre}
	</select>

	<select id="checkMovieGenreExists"
		resultType="com.tenco.movie.repository.model.MovieGenre">
		select * from movie_genre_tb where movie_id = #{movieId}
		and genre_id = #{genreId}
	</select>

	<insert id="insertMovieGenre">
		INSERT INTO movie_genre_tb (movie_id, genre_id)
		VALUES (#{movieId}, #{genreId});
	</insert>

	<insert id="insertMovieDetail">
		INSERT INTO movie_detail_tb (movie_id, title,
		title_en, show_tm, open_dt, prd_stat_nm, watch_grade_nm)
		VALUES
		(#{movieId}, #{title}, #{titleEn}, #{showTm}, #{openDt},
		#{prdStatNm},#{watchGradeNm})
	</insert>

	<insert id="insertGenre">
		insert into genres_tb (genre_name) values(#{genre})
	</insert>
	<insert id="insertDirector">
		insert into directors_tb (name, director_face_file)
		values(#{name}, #{directorFaceFile})
	</insert>
<<<<<<< HEAD
<<<<<<< HEAD
>>>>>>> dac25ec (3차 자동 인설트 완성)
<<<<<<< HEAD
>>>>>>> a3aafde (3차 자동 인설트 완성)
=======
=======
=======
>>>>>>> b04a172 (충돌해결중)

	<insert id="insertActors">
		insert into actors_tb (name, actor_face_file)
		values
		(#{name}, #{actorFaceFile});
	</insert>

	<select id="findByActorName"
		resultType="com.tenco.movie.repository.model.Actors">
		select * from actors_tb where name = #{name}
	</select>

	<insert id="insertMovieActor">
		insert into movie_actor_tb (movie_id, actors_id)
		values(#{movieId},#{actorId})
	</insert>

	<select id="findByMovieAndGenre"
		resultType="com.tenco.movie.repository.model.MovieActor">
		select * from movie_actor_tb where movie_id = #{movieId}
		AND actors_id = #{actorId}
	</select>
<<<<<<< HEAD
<<<<<<< HEAD
>>>>>>> 679302a (영화API파싱 거의 95완료)
<<<<<<< HEAD
>>>>>>> 96e61be (영화API파싱 거의 95완료)
=======
=======
=======
>>>>>>> b04a172 (충돌해결중)

	<select id="findByDirectorName"
		resultType="com.tenco.movie.repository.model.Director">
		select * from directors_tb where name = #{name}
	</select>

	<select id="findByMovieIdAndDirectorId"
		resultType="com.tenco.movie.repository.model.MovieDirector">
		select * from movie_director_tb where movie_id =
		#{movieId}
		AND director_id = #{directorId}
	</select>

	<insert id="insertByMovieDirector">
		insert into movie_director_tb (movie_id, director_id)
		values(#{movieId}, #{directorId})
	</insert>

<<<<<<< HEAD
>>>>>>> 277621a (영화 디테일 페이지 완료)
>>>>>>> 06e1c65 (영화 디테일 페이지 완료)
=======
>>>>>>> b04a172 (충돌해결중)
</mapper>